# MyUIFrame(伪)
这是我尝试使用webgl+typescript写的一个UI框架。说是ui框架，其实也就是尝试实现其他ui框架中小部分功能的小demo，所以特意加了一个(伪)字。写这个demo的目的在于，想凭借以往使用UI框架的经验借助图形编程接口尝试自己实现一下UI绘制和交互的功能，帮助自己理解UI绘制和人机交互的一些具体细节。当然，这里不会涉及什么html+css+javascript、xaml+c#和qt+qss等那一套UI编写方式的实现。如果要实现这些，恐怕我这个demo会变得遥遥无期。因此，我这里只会涉及传统UI框架的那一套，也就是MFC、早期Qt的那种纯程序编写界面的形式。
## 当前进度
1. 将canvas模拟成桌面，即在canvas模拟生成控件、模拟交互等；
2. 控件基类widget已经满足基本绘制，等待后期添加功能进行扩展；其中，利用webgl的shader和texture功能可以方便的实现自定义控件以及各种控件渲染效果（之后会随着功能的添加进行扩展）；
3. 控件已经实现拖拽、伸缩、变焦等功能（目前实现得比较生硬，之后会改善）；
4. 开始有uwp范了，win10桌面界面的透明效果，在该框架中可以轻松使用混合技术实现（当前已关闭，因为和深度测试冲突）。
5. 控件布局，当前不会考虑实现该功能，下方的展望中有说明，毕竟该框架不在于投入使用，仅仅是尝试使用图形接口实现一个类UI框架，了解熟悉UI渲染的大致流程，所以不影响界面呈现的功能，暂不考虑实现。
6. 实现typescript版的“信号与槽”功能；（想实现控件之间的通信，所以参考了Qt的信息与槽的实现。但是，Qt的信号与槽利用了其元对象系统实现，想用typescript实现类似的效果是不可能的，所以我借鉴了信号与槽的外壳，内部实现则是利用了typescript语言特性，勉强算是实现了一个类似的信号与槽的功能，代码演示如下）
```typescript
//首先你需要在两个控件之中，分别实现信号函数和槽函数，具体使用过程如下：
//信号函数：
oneSign(arg : number){  //可以有任意个参数，这里使用一个参数作为例子，并且信号函数和槽函数的参数要一致，这一点和Qt的一样
  this.callFunc("oneSign",[number]);  //Qt里面不需要自己实现信号函数，它是由元对象编译器代为实现，但是这里我们需要实现它，只需要调用基类的callFunc函数传入信号函数名和参数数组即可。
}
//槽函数：
oneSlot(arg:number){
  //这里可以实现你想要达到的目的
}

//准备好了信号和槽函数就可以进行连接，在需要连接的地方按照如下编写即可连接:
this.connect("oneSign",function(args:any[]){ widget.oneSlot(<number>args[0])});  //第二个参数是一个lambda表达式，里面调用了槽函数

//最后即是在需要发送信号的地方调用信号函数即可，Qt里面是类似于这样的语句  emit func();
this.oneSign(233);
```
形式上和Qt的信号与槽类似，但是实现上差别很大，信号与槽进行连接的地方不仅可以在类内，还可以是类外，只要能调用类内的信号和槽函数即可；还有就是，接收信号的槽函数不一定是实例的成员函数也可以是lambda表达式，这一点和Qt中的一致。
## 当前效果
![效果](https://github.com/Zer0n1-coder/MyToys/blob/master/MyUIFrame/rendering.jpg)  
## 展望
该框架勉强算是能渲染出一些控件以及具备其特有的功能了，但是比起一个完整的UI框架还差的远，除去需要进一步封装的一些底层逻辑之外，还有一些值得去探究的功能如下：  
1. ··ml构建界面，·ss编写样式和布局，X语言实现逻辑的前后端分离的界面编写框架，现在主流的UI框架都采用了类似的编写逻辑，比如WPF、UWP、Qt、Electron等，要学界面编写这种形式肯定是绕不开的。可是，我前面已经说了如果要实现这种框架，我的小demo只能遥遥无期，所以不打算尝试去实现，但会一直留意其中的原理；
2. 响应式布局(前面提到的控件布局我放到了此处)。
